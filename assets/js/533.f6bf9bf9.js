(window.webpackJsonp=window.webpackJsonp||[]).push([[533],{1242:function(e,t,n){"use strict";n.r(t);var s=n(9),a=Object(s.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("TitleSpan",[e._v(e._s(e.$frontmatter.folder))]),e._v(" "),n("h1",{attrs:{id:"frontmatter-title"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[e._v("#")]),e._v(" "+e._s(e.$frontmatter.title))]),e._v(" "),n("VersionWarning"),e._v(" "),n("TocHeader"),e._v(" "),n("TOC",{staticClass:"table-of-contents",attrs:{"include-level":[2,3]}}),e._v(" "),n("p",[e._v("This demo is a simple Airnode deployment, using a hands-on approach, to better\nunderstand the overall deployment process of the Airnode\n"),n("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/docker/deployer-image.html"}},[e._v("client image")]),e._v(" which deploys\nthe off-chain component of Airnode ("),n("RouterLink",{attrs:{to:"/airnode/v0.6/"}},[e._v("a.k.a., the node")]),e._v(") to a Docker\ncontainer, in this case a locally run Docker container. It uses an API endpoint\n("),n("code",[e._v("GET /simple/price")]),e._v(") from\n"),n("a",{attrs:{href:"https://www.coingecko.com/en/api/documentation",target:"_blank",rel:"noopener noreferrer"}},[e._v("CoinGecko"),n("OutboundLink")],1),e._v(" which returns the\ncurrent value of a coin. This demo does not detail the overall configuration of\nan Airnode, it is just a quick start.")],1),e._v(" "),n("p",[e._v("An Airnode Docker container deployment uses a Docker image (called\n"),n("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/docker/deployer-image.html"}},[e._v("client image")]),e._v(") which in turn\nrequires two files as input.")],1),e._v(" "),n("ul",[n("li",[n("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/tutorial/quick-deploy-container/config-json.html"}},[e._v("config.json")])],1),e._v(" "),n("li",[n("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/tutorial/quick-deploy-container/secrets-env.html"}},[e._v("secrets.env")])],1)]),e._v(" "),n("p",[e._v("For the purpose of this demo these files have been created and only require a\nfew minor changes on your part to make the deployment of the demo Airnode\nsuccessful. These changes are needed to supply a chain provider url and a\nmnemonic.")]),e._v(" "),n("h2",{attrs:{id:"install-prerequisites"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#install-prerequisites"}},[e._v("#")]),e._v(" Install Prerequisites")]),e._v(" "),n("p",[e._v("Install the "),n("a",{attrs:{href:"https://docs.docker.com/get-docker/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Desktop"),n("OutboundLink")],1),e._v(" and launch it.")]),e._v(" "),n("h2",{attrs:{id:"project-folder"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#project-folder"}},[e._v("#")]),e._v(" Project Folder")]),e._v(" "),n("p",[e._v("A project folder is needed for this demo. You can create it manually or download\na zip file ready to go.")]),e._v(" "),n("Tabs",{attrs:{type:"border-card"}},[n("Tab",{attrs:{label:"Create Manually"}},[n("p",[e._v("Create a folder called "),n("code",[e._v("quick-deploy-container")]),e._v(" with an internal folder named\n"),n("code",[e._v("/config")]),e._v(". Place the contents of the files provided\n("),n("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/tutorial/quick-deploy-container/config-json.html"}},[e._v("config.json")]),e._v(" and "),n("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/tutorial/quick-deploy-container/secrets-env.html"}},[e._v("secrets.env")]),e._v(") into the\nlocations show below.")],1),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("quick-deploy-container\n├── config\n    ├── config.json\n    └── secrets.env\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])])]),e._v(" "),n("Tab",{attrs:{label:"Download"}},[n("p",[e._v("Download the "),n("a",{attrs:{href:"/zip-files/quick-deploy-container-v0.6.zip",download:""}},[e._v("\nquick-deploy-container")]),e._v(" project folder.")])])],1),e._v(" "),n("h2",{attrs:{id:"configuration"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),n("p",[e._v("Prepare the two configuration files, "),n("code",[e._v("config.json")]),e._v(" and "),n("code",[e._v("secrets.env")]),e._v(". By\ndefault, the Airnode client image looks for them in the "),n("code",[e._v("/config")]),e._v(" folder.")]),e._v(" "),n("h3",{attrs:{id:"config-json"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#config-json"}},[e._v("#")]),e._v(" config.json")]),e._v(" "),n("p",[e._v("This file requires no changes on your part. It has been created with just one\nAPI endpoint. It will instruct the Airnode to attach to the Rinkeby test\nnetwork. There are two variables this file will extract (interpolation) from\n"),n("code",[e._v("secrets.env")]),e._v(".")]),e._v(" "),n("h3",{attrs:{id:"secrets-env"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#secrets-env"}},[e._v("#")]),e._v(" secrets.env")]),e._v(" "),n("p",[e._v("Add values for each of the these fields.")]),e._v(" "),n("ul",[n("li",[n("p",[n("code",[e._v("CHAIN_PROVIDER_URL")]),e._v(": A chain provider url from a provider such as\n"),n("a",{attrs:{href:"https://infura.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Infura"),n("OutboundLink")],1),e._v(". Make sure the provider url you use is for the\nRinkeby test network. Using another chain provider other than Infura is\nacceptable.")]),e._v(" "),n("ul",[n("li",[e._v("Sign-up or login to Infura.")]),e._v(" "),n("li",[e._v("Create a new project, select the "),n("strong",[e._v("Settings")]),e._v(" tab in the project.")]),e._v(" "),n("li",[e._v("Copy the URL (https) for Rinkeby under the Endpoints pick list.")])])]),e._v(" "),n("li",[n("p",[n("code",[e._v("AIRNODE_WALLET_MNEMONIC")]),e._v(": Provide the seed phrase (mnemonic) to a digital\nwallet. For the purpose of this demo it does not need eth in it for the\nRinkeby test network. If you don't have one use the Admin CLI command\n"),n("RouterLink",{attrs:{to:"/airnode/v0.6/reference/packages/admin-cli.html#generate-mnemonic"}},[e._v("generate-mnemonic")]),e._v("\nto create one or another method you prefer.")],1)])]),e._v(" "),n("h2",{attrs:{id:"deploy"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#deploy"}},[e._v("#")]),e._v(" Deploy")]),e._v(" "),n("p",[e._v("Make sure Docker is running and then execute the client image from the root of\nthe "),n("code",[e._v("quick-deploy-container")]),e._v(" folder.")]),e._v(" "),n("p",[e._v("Run the following command to deploy the demo Airnode locally. Note that the\nversion of "),n("code",[e._v("api3/airnode-deployer")]),e._v(" matches the "),n("code",[e._v("nodeVersion")]),e._v(" in the config.json\nfile.")]),e._v(" "),n("Tabs",{attrs:{type:"border-card"}},[n("Tab",{attrs:{label:"Linux/Mac/WSL2/PowerShell"}},[n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[e._v("docker run --detach "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  --volume "),n("span",{pre:!0,attrs:{class:"token string"}},[e._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$(")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("pwd")]),n("span",{pre:!0,attrs:{class:"token variable"}},[e._v(")")])]),e._v('/config:/app/config"')]),e._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  --name quick-deploy-container-airnode "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  api3/airnode-client:5\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])])]),e._v(" "),n("Tab",{attrs:{label:"Windows CMD"}},[n("p",[e._v("For Windows, use CMD (and not PowerShell).")]),e._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[e._v("docker run --detach ^\n  --volume "),n("span",{pre:!0,attrs:{class:"token string"}},[e._v('"%cd%/config:/app/config"')]),e._v(" ^\n  --name quick-deploy-container-airnode ^\n  api3/airnode-client:0.6.7\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])])])],1),e._v(" "),n("h2",{attrs:{id:"start-and-stop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#start-and-stop"}},[e._v("#")]),e._v(" Start and Stop")]),e._v(" "),n("p",[e._v("You can start and stop the Airnode with the Docker desktop application or via\nterminal commands.")]),e._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[e._v("docker stop quick-deploy-container-airnode\n\ndocker start quick-deploy-container-airnode\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("h2",{attrs:{id:"logs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#logs"}},[e._v("#")]),e._v(" Logs")]),e._v(" "),n("p",[e._v("You can view the Airnode's logs with the Docker desktop application or via\nterminal commands.")]),e._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[e._v("docker logs quick-deploy-container-airnode\n\ndocker logs --follow quick-deploy-container-airnode\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("h2",{attrs:{id:"test-the-airnode"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#test-the-airnode"}},[e._v("#")]),e._v(" Test the Airnode")]),e._v(" "),n("p",[e._v("After a successful deployment the Airnode can be tested using the\n"),n("a",{attrs:{href:"https://github.com/api3dao/airnode/tree/v0.6/packages/airnode-node#testing-api",target:"_blank",rel:"noopener noreferrer"}},[e._v("test-api.js"),n("OutboundLink")],1),e._v("\nscript which allows you to execute an Airnode endpoint without accessing the\nblockchain.")]),e._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[e._v("test-api.js")]),e._v(" "),n("p",[e._v("The "),n("code",[e._v("test-api.js")]),e._v(" nodejs script is an unsupported feature used for internal\ndevelopment and should not be used for any production purposes. It is used here\npurely for demonstration purposes.")])]),e._v(" "),n("p",[e._v("The Nodejs script "),n("code",[e._v("test-api.js")]),e._v(" requires two arguments, endpointId and\nparameters to get a response from an integrated API. These arguments come from\nthe "),n("code",[e._v("config.json")]),e._v(" file.")]),e._v(" "),n("ul",[n("li",[e._v("-e, --endpoint-id [string][required]: See config.json\n"),n("code",[e._v("triggers.rrp[0].endpointId")]),e._v(".")]),e._v(" "),n("li",[e._v('-p, --parameters [string] [default: "{}"]: See config.json\n'),n("code",[e._v("ois.endpoints[0].parameters[0].name")]),e._v(".")])]),e._v(" "),n("p",[e._v("The arguments are pre-filled for you in the request code below. Note the JSON\nresponse value is the ETH price multiplied by "),n("code",[e._v("1e6")]),e._v(", which results from setting\nthe "),n("code",[e._v("_times")]),e._v(" reserved parameter to "),n("code",[e._v("1000000")]),e._v(" in "),n("code",[e._v("config.json")]),e._v(". This manipulation\nis necessary in order to correctly handle floating point numbers.")]),e._v(" "),n("h3",{attrs:{id:"request"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#request"}},[e._v("#")]),e._v(" Request")]),e._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# For Windows CMD replace line termination marker \\ with ^")]),e._v("\ndocker "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("exec")]),e._v(" -it quick-deploy-container-airnode node src/cli/test-api.js "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  -e 0x6db9e3e3d073ad12b66d28dd85bcf49f58577270b1cc2d48a43c7025f5c27af6 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  -p "),n("span",{pre:!0,attrs:{class:"token string"}},[e._v('\'{"coinIds":"api3", "coinVs_currencies":"usd"}\'')]),e._v("\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])]),n("p",[e._v("Alternately you could run the test using the CLI command prompt provided for the\ncontainer in the Docker desktop application.")]),e._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# For Windows CMD replace line termination marker \\ with ^")]),e._v("\nnode src/cli/test-api.js "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  -e 0x6db9e3e3d073ad12b66d28dd85bcf49f58577270b1cc2d48a43c7025f5c27af6 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n  -p "),n("span",{pre:!0,attrs:{class:"token string"}},[e._v('\'{"coinIds":"api3", "coinVs_currencies":"usd"}\'')]),e._v("\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])]),n("h3",{attrs:{id:"response"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#response"}},[e._v("#")]),e._v(" Response")]),e._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[e._v('"encodedValue"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[e._v('"0x0000000000000000000000000000000000000000000000000000000000362b30"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[e._v('"rawValue"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[e._v('"api3"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[e._v('"usd"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("3.55")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[e._v('"values"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[e._v('"3550000"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("airnode-tutorials-TutorialResponse"),e._v(" "),n("h2",{attrs:{id:"remove-the-airnode"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#remove-the-airnode"}},[e._v("#")]),e._v(" Remove the Airnode")]),e._v(" "),n("p",[e._v("When you are done with this demo you can remove it. Do so using the Docker\ndesktop application or by using the following terminal command. When using the\nterminal command be sure to stop the container first if running.")]),e._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Stop the container if it is running.")]),e._v("\ndocker stop quick-deploy-container-airnode\n\ndocker "),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" quick-deploy-container-airnode\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])]),n("h2",{attrs:{id:"summary"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#summary"}},[e._v("#")]),e._v(" Summary")]),e._v(" "),n("p",[e._v("You have deployed an Airnode into a Docker container and tested it using the\n"),n("code",[e._v("test-api.js")]),e._v(" Nodejs script. Please remember the script is not supported for use\nin production environments.")]),e._v(" "),n("p",[e._v("This Airnode attaches itself to the Rinkeby testnet as stated in the\n"),n("code",[e._v("config.json")]),e._v(" file. The Airnode, upon deployment, started contacting the\nAirnodeRrpV0 contract on the Rinkeby testnet to gather any requests made by\nrequesters to this Airnode. This tutorial did not address making a request\non-chain as its purpose was simply to quickly deploy a functional Airnode.")])],1)}),[],!1,null,null,null);t.default=a.exports}}]);