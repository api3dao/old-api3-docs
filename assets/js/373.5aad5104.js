(window.webpackJsonp=window.webpackJsonp||[]).push([[373],{1030:function(t,s,e){"use strict";e.r(s);var a=e(9),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("TitleSpan",[t._v(t._s(t.$frontmatter.folder))]),t._v(" "),e("h1",{attrs:{id:"frontmatter-title"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[t._v("#")]),t._v(" "+t._s(t.$frontmatter.title))]),t._v(" "),e("VersionWarning"),t._v(" "),e("TocHeader"),t._v(" "),e("TOC",{staticClass:"table-of-contents",attrs:{"include-level":[2,3]}}),t._v(" "),e("p",[t._v("An Airnode can authorize requester contract access to its underlying API using\ntwo methods.")]),t._v(" "),e("ul",[e("li",[e("RouterLink",{attrs:{to:"/airnode/v0.3/grp-providers/guides/build-an-airnode/apply-auth.html#authorizers"}},[t._v("Authorizers")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/airnode/v0.3/grp-providers/guides/build-an-airnode/apply-auth.html#relay-security-schemes"}},[t._v("Relay security schemes")])],1)]),t._v(" "),e("p",[t._v("This guide focuses on the usage of these concepts. See the\n"),e("RouterLink",{attrs:{to:"/airnode/v0.3/concepts/authorization.html"}},[t._v("Authorization section")]),t._v(" for details on these\ntwo authorization methods. You can use one or the other, or both at the same\ntime.")],1),t._v(" "),e("p",[t._v("When you deployed your Airnode a receipt file was generated. In it is the\nAirnode's "),e("code",[t._v("airnodeAddress")]),t._v(". Sponsors (via their sponsored requesters) use\n"),e("code",[t._v("airnodeAddress")]),t._v(" and an "),e("code",[t._v("endpointId")]),t._v(" to make requests to your Airnode's\nendpoints. However, you probably do not want to serve them publicly.")]),t._v(" "),e("ul",[e("li",[t._v("Only serve your own\n"),e("RouterLink",{attrs:{to:"/airnode/v0.3/grp-developers/requesters-sponsors.html"}},[t._v("requester contracts")]),t._v(".")],1),t._v(" "),e("li",[t._v("Only serve sponsors who have made a subscription payment.")]),t._v(" "),e("li",[t._v("Only serve sponsors who have gone through KYC.")])]),t._v(" "),e("h2",{attrs:{id:"authorizers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#authorizers"}},[t._v("#")]),t._v(" Authorizers")]),t._v(" "),e("p",[t._v("An "),e("RouterLink",{attrs:{to:"/airnode/v0.3/concepts/authorization.html"}},[t._v("authorizer")]),t._v(' is a contract which\ntypically checks for a single condition ("has the requester made their monthly\npayment", "is this '),e("code",[t._v("requesterAddress")]),t._v(' whitelisted", etc.). Authorizers can be\ncombined to enforce more complex policies. If any of the authorizers in the list\ngives access, the request will considered to be authorized. From a logical\nstandpoint, the authorization outcomes get '),e("em",[t._v("OR")]),t._v("ed.")],1),t._v(" "),e("p",[t._v("You can use different authorizers contracts for your Airnode deployment per\nchain by declaring them in the "),e("code",[t._v("config.json")]),t._v(" file under "),e("code",[t._v("chains[n].authorizers")]),t._v(".\nAdd a list of authorizer contracts addresses for each chain. If the\n"),e("code",[t._v("chains[n].authorizers")]),t._v(" array is left empty then all requests will be accepted\nby the Airnode but still could be filtered by the second method of\nauthorization, "),e("RouterLink",{attrs:{to:"/airnode/v0.3/grp-providers/guides/build-an-airnode/apply-auth.html#relay-security-schemes"}},[t._v("relay security schemes")]),t._v(".")],1),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n ...\n "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"chains"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      ...\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authorizers"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Requests must satisfy at least one contract")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xeabb...C123"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xCE5e...1abc"')]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      ...\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authorizers"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// All requests will be processed")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      ...\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authorizers"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Requests must satisfy one contract")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xeabb...C123"')]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br"),e("span",{staticClass:"line-number"},[t._v("26")]),e("br")])]),e("p",[t._v("The authorizers you use will authorize all requests regardless of which endpoint\nis called. Endpoints are declared in the "),e("code",[t._v("ois.endpoints")]),t._v(" field of the\n"),e("code",[t._v("config.json")]),t._v(" file. To further filter by a particular endpoint you must use an\nauthorizer like RequesterAuthorizerWithAirnode.")]),t._v(" "),e("h3",{attrs:{id:"requesterauthorizerwithairnode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#requesterauthorizerwithairnode"}},[t._v("#")]),t._v(" RequesterAuthorizerWithAirnode")]),t._v(" "),e("p",[t._v("A common use case for an authorizer is the\n"),e("RouterLink",{attrs:{to:"/airnode/v0.3/concepts/authorization.html#requesterauthorizerwithairnode"}},[t._v("RequesterAuthorizerWithAirnode")]),t._v("\nauthorizer contract developed for Airnode operators to use right out-of-the-box.\nIt allows the whitelisting of requester contracts (with or without expiration\ntimestamps) on a per endpoint basis. This is the most common use case and may in\nfact satisfy the needs of many Airnodes. You can find the contract address of\nthis authorizer in the\n"),e("RouterLink",{attrs:{to:"/airnode/v0.3/reference/airnode-addresses.html"}},[t._v("Airnode Contract Addresses")]),t._v(" doc.")],1),t._v(" "),e("p",[t._v("To use the RequesterAuthorizerWithAirnode authorizer:")]),t._v(" "),e("ol",[e("li",[t._v("Add the authorizer contract address to the "),e("code",[t._v("chains[n].authorizers[]")]),t._v(" array.")]),t._v(" "),e("li",[t._v("After your Airnode is deployed, call the Admin CLI command\n"),e("RouterLink",{attrs:{to:"/airnode/v0.3/reference/packages/admin-cli.html#set-whitelist-expiration"}},[e("code",[t._v("set-whitelist-expiration")])]),t._v("\nto add the desired requester contract addresses to the whitelist maintained\nby RequesterAuthorizerWithAirnode.")],1)]),t._v(" "),e("p",[t._v("Once implemented, only requester contract addresses you have added to\nRequesterAuthorizerWithAirnode will have access to your Airnode.")]),t._v(" "),e("h2",{attrs:{id:"relay-security-schemes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#relay-security-schemes"}},[t._v("#")]),t._v(" Relay Security Schemes")]),t._v(" "),e("p",[t._v("Define the relay security schemes you want to use for your API. See the\n"),e("RouterLink",{attrs:{to:"/airnode/v0.3/grp-providers/guides/build-an-airnode/api-security.html#supported-security-schemes"}},[t._v("Supported Security Schemes")]),t._v("\nsection of the API Security doc for more details about "),e("em",[t._v("relay security schemes")]),t._v(".")],1),t._v(" "),e("p",[t._v("In the following example Airnode will relay the requester address (named\n"),e("code",[t._v("requesterAddress")]),t._v(") to the API operation. The value of "),e("code",[t._v("requesterAddress")]),t._v(" will\neither be in the body for a POST request or query string for a GET request.")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ois"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"My OIS title"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"apiSpecifications"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"components"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"securitySchemes"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"forwardsRequesterAddress"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"in"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"query"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"relayRequesterAddress"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"requesterAddress"')]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"security"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"forwardsRequesterAddress"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br")])])],1)}),[],!1,null,null,null);s.default=n.exports}}]);