---
title: Airnode ABI è§„èŒƒ
---

<TitleSpan>æŠ€æœ¯è§„æ ¼ï¼š</TitleSpan>

# {{$frontmatter.title}}

<VersionWarning/>

<TocHeader /> <TOC class="table-of-contents" :include-level="[2,4]" />

[åˆçº¦åº”ç”¨äºŒè¿›åˆ¶æ¥å£ï¼ˆABIï¼‰](https://docs.soliditylang.org/en/v0.6.12/abi-spec.html)ç”¨äºç¼–ç ä¸åŒç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶ä¸Ethereumåˆçº¦äº¤äº’ã€‚ å› æ­¤ï¼ŒSolidityå’Œç›¸åº”æ¨¡å—ï¼Œå¦‚[web3.js](https://web3js.readthedocs.io/)å’Œ [ethers.js](https://docs.ethers.io/) ï¼Œéƒ½å°†ABIçš„ç¼–ç -è§£ç åŠŸèƒ½è§†ä¸ºä¸€æµçš„ç»„æˆéƒ¨åˆ†ã€‚ è¿™ä½¿å¾—ä½¿ç”¨åˆçº¦ABIå¯¹APIè°ƒç”¨å‚æ•°è¿›è¡Œç¼–ç ï¼Œæˆä¸ºä¸€ä¸ªéå¸¸æœ‰å¸å¼•åŠ›çš„é€‰æ‹©ã€‚

å°½ç®¡ä½¿ç”¨åˆçº¦ABIå¯¹APIè°ƒç”¨å‚æ•°è¿›è¡Œç¼–ç æœ‰å¾ˆå¤šå¥½å¤„ï¼Œä½†å®ƒä¸èƒ½ç›´æ¥ç”¨äºè¿™ä¸ªç›®çš„ã€‚ å¼•è‡ª[Solidityæ–‡æ¡£](https://docs.soliditylang.org/en/v0.6.12/abi-spec.html)ï¼š

> ç¼–ç ä¸æ˜¯è‡ªæˆ‘æè¿°çš„ï¼Œå› æ­¤éœ€è¦è§£ç ç¨‹åºã€‚

è¿™æ„å‘³ç€ï¼Œå½“ä¼ é€’APIè°ƒç”¨å‚æ•°ï¼ˆ`bytes`ç±»å‹ï¼‰æ—¶ï¼Œè¿˜éœ€è¦ä¼ é€’è¿™äº›å‚æ•°çš„ç±»å‹åˆ—è¡¨ï¼Œè¿™å¾ˆéº»çƒ¦ï¼Œè€Œä¸”ä¸æ¸…æ¥šè¿™äº›ç±»å‹å¦‚ä½•ç¼–ç ã€‚ ä½œä¸ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼ŒAirnodeä½¿ç”¨_Airnode ABI è§„èŒƒ_ï¼Œè¿™æ˜¯åˆçº¦ABIè§„èŒƒçš„ä¸€ä¸ªæ‰©å±•ï¼ŒåŒ…æ‹¬ä¸€ä¸ªä¿æŒæ¨¡å¼çš„å¤´éƒ¨ã€‚

## å¤´éƒ¨

Airnode ABIè§„èŒƒå¤´éƒ¨çš„ç±»å‹æ˜¯`bytes32`ï¼Œä½œä¸ºæ¨¡å¼ï¼ˆå³æè¿°APIè°ƒç”¨å‚æ•°çš„ç±»å‹ï¼‰ã€‚ å¤´éƒ¨æ˜¯ä»¥ UTF-8ç¼–ç çš„ï¼Œä»¥ä¾¿äºä½¿ç”¨ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```
"1BSasbiuBa"
```

ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œ `1`, è¡¨ç¤ºç¼–ç ç‰ˆæœ¬ã€‚ åé¢çš„æ¯ä¸ªå­—ç¬¦ä»£è¡¨ä¸€ä¸ª API è°ƒç”¨å‚æ•°çš„ç±»å‹ã€‚

### ç±»å‹ç¼–ç 

ç±»å‹ä»¥ UTF-8 å­—ç¬¦ç¼–ç ï¼Œå…·ä½“å¦‚ä¸‹ï¼š

```
B: bytes
b: bytes32
S: string
s: string32
a: address
u: uint256
i: int256
f: bool
```

æ³¨æ„ï¼ŒåŠ¨æ€å¤§å°çš„ç±»å‹ç”¨å¤§å†™å­—æ¯è¡¨ç¤ºï¼Œ é™æ€å¤§å°çš„ç±»å‹ç”¨å°å†™å­—æ¯è¡¨ç¤ºã€‚ å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`s`ä»£è¡¨`string32`ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªäººä¸ºè®¾å®šçš„ç±»å‹ï¼Œå®ƒä¸æ˜¯[solidity ç±»å‹](https://docs.soliditylang.org/en/latest/types.html)çš„ä¸€éƒ¨åˆ†ã€‚ è¿™ç§ç±»å‹ä»£ä¹‹ä»¥ `bytes32`åœ¨é“¾ä¸Šè¡¨ç¤ºçš„ã€‚ åŸå› åœ¨ [string32 è¯¦æƒ…](airnode-abi-specifications.md#string32) ä¸­è¿›è¡Œäº†è¯¦ç»†è§£é‡Šã€‚

## ç¼–ç æ ¼å¼

Airnode ABI è§„æ ¼æœ‰ä»¥ä¸‹ç¼–ç æ ¼å¼(æœ‰ç‚¹ ç±»ä¼¼äº [SDS](https://github.com/antirez/sds))ï¼š

```
[------------------------][-----------------------------------------]
bytes32ç±»å‹å¤´éƒ¨      API è°ƒç”¨å‚æ•°åâ€“å€¼é…å¯¹
```

è¯·æ³¨æ„ï¼Œæ¯ä¸ªAPIè°ƒç”¨å‚æ•°ä¹‹å‰éƒ½æœ‰ç±»å‹ `å­—èŠ‚32` çš„åç§°ã€‚

## ç¼–ç ç¤ºä¾‹

è¦ç¼–ç ä»¥ä¸‹APIè°ƒç”¨å‚æ•°

```json
{
  "MyFirstBytes": "0x1234",
  "MyString": "1234",
  "MyFirstAddress": "0x0000000000000000000000000000000000001234",
  "MyString32": "1234",
  "MyBytes32": "0x68656c6c6f000000000000000000000000000000000000000000000000000000",
  "MyInt256": "-1234",
  "MyUint256": "1234",
  "MySecondBytes": "0x5678",
  "MySecondAddress": "0x0000000000000000000000000000000000005678"
}
```

æ‚¨éœ€è¦åœ¨è¯·æ±‚è€…åˆçº¦ä¸­è¿™æ ·åšï¼š

```solidity
bytes memory parameters = abi.encode(
    bytes32("1BSasbiuBa"),
    bytes32("MyFirstBytes"), bytes(hex"1234"),
    bytes32("MyString"), "1234",
    bytes32("MyFirstAddress"), 0x0000000000000000000000000000000000001234,
    bytes32("MyString32"), bytes32("1234"),
    bytes32("MyBytes32"), 0x68656c6c6f000000000000000000000000000000000000000000000000000000,
    bytes32("MyInt256"), -1234,
    bytes32("MyUint256"), 1234,
    bytes32("MySecondBytes"), bytes(hex"5678"),
    bytes32("MySecondAddress"), 0x0000000000000000000000000000000000005678
);
```

è¯·æ³¨æ„ï¼Œæ‚¨ä¸éœ€è¦ä¸ºåˆçº¦æ·»åŠ å¤–éƒ¨åº“ï¼Œ `abi.encode()` åœ¨gasä½¿ç”¨æ–¹é¢è´¹ç”¨ç›¸å½“ä½å»‰(ä¸å¤‡é€‰ç¼–ç æ–¹æ³•ç›¸æ¯”)ã€‚

## è§£ç ç¤ºä¾‹

å¦‚æœä½ çŸ¥é“ç¼–ç å‚æ•°çš„æ¨¡å¼ï¼Œç„¶åå°±å¯ä»¥åœ¨é“¾ä¸Šå¯¹å…¶è§£ç ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ¨¡å¼æ˜¯ `(bytes,string)`æ ¼å¼çš„:

```solidity
(
    bytes32 header,
    bytes32 name1, bytes memory value1,
    bytes32 name2, string memory value2
) = abi.decode(parameters, (bytes32,bytes32,bytes,bytes32,string));
```

è¯·æ³¨æ„ï¼Œè¿™ç§æ“ä½œä¸è€ƒè™‘å¤´éƒ¨ï¼Œè€Œæ˜¯å°†æ¨¡å¼ç¡¬ç¼–ç åˆ°ä»£ç ä¸­ã€‚ ä¹Ÿå¯ä»¥åœ¨é“¾ä¸Šè§£ææ ‡é¢˜å¹¶è¿›è¡Œç›¸åº”çš„è§£ç ï¼Œä½†è¿™ ä¼šå˜å¾—æ›´åŠ å¤æ‚ã€‚

## è¯¦æƒ…

### `string32`

å‚æ•°æ˜¯`string32`ç±»å‹çš„ï¼ˆåœ¨ABIè§„èŒƒæ¨¡å¼å¤´ä¸­è¢«ç¼–ç ä¸º`s`ï¼‰ï¼Œæ„å‘³ç€è¯¥å‚æ•°æ˜¯UTF-8ç¼–ç çš„æ–‡æœ¬ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœå‚æ•°æ˜¯

```
0x68656c6c6f000000000000000000000000000000000000000000000000000000
```

Airnode å°†ä¼šè§£ç ä¸º

```
"hello"
```

å¹¶å°†å…¶åé¦ˆåˆ°APIï¼Œè¿™æ˜¯ç”¨æˆ·åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æƒ³è¦åšçš„ã€‚ å¦‚æœå‚æ•°æ²¡æœ‰ç¼–ç æ–‡æœ¬ï¼Œè¿™ä¼šæˆä¸ºä¸€ä¸ªé—®é¢˜ï¼Œä¾‹å¦‚æœ‰è¿™æ ·ä¸€ä¸ªå“ˆå¸Œå€¼ï¼š

```
0x1fd36c61981313c0c155d33ffac0325bd7c00d21d52442981bb13d2fa13e8f71
```

å¦‚æœæ­¤å“ˆå¸Œå€¼ç¼–ç ä¸º `string32` ç±»å‹ï¼ŒAirnode ä¼šå°†å…¶è§£ç ä¸ºï¼š

```
Ã“laÂ˜Ã€ÃUÃ“?ÃºÃ€2[Ã—Ã€
!Ã•$BÂ˜Â±=/Â¡>Âq
```

è¿™å¯èƒ½ä¸æ˜¯ç”¨æˆ·æƒ³è¦çš„ä¸œè¥¿ã€‚ å¯¹äºè¿™äº›æƒ…å†µï¼Œç”¨æˆ·åº”è¯¥ä½¿ç”¨ [`bytes32`](airnode-abi-specifications.md#bytes32) ç±»å‹ä»£æ›¿ã€‚

### `bytes32`

è¦å¯¹é“¾ä¸Šçš„`bytes32`å“ˆå¸Œè¿›è¡Œç¼–ç ï¼Œè¯·ä½¿ç”¨ABIå¤´éƒ¨æ¨¡å¼ä¸­ç”±`b`è¡¨ç¤º`bytes32`ç±»å‹ã€‚

```solidity
bytes memory parameters = abi.encode(
    bytes32("1b"),
    bytes32("MyBytes32"), 0x68656c6c6f000000000000000000000000000000000000000000000000000000,
);
```

å½“è¢«Airnodeè§£ç æ—¶ï¼Œè¯¥å€¼å°†æ˜¯å“ˆå¸Œå€¼æœ¬èº«ï¼š

```
"0x1fd36c61981313c0c155d33ffac0325bd7c00d21d52442981bb13d2fa13e8f71"
```

å¦‚æœæ‚¨æƒ³è¦åœ¨é“¾ä¸Šå­˜å‚¨32ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²å€¼ï¼Œè¯·ä½¿ç”¨ [`string32`](airnode-abi-specifications.md#string32) ç±»å‹ä»£æ›¿ã€‚

### `bool`

`bool`ç±»å‹ï¼Œä½¿ç”¨ABIè§„èŒƒæ¨¡å¼ç¼–ç ä¸ºå­—æ¯`f`ï¼Œå¯ä»¥ç”¨æ¥ç¼–ç ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ æ ‡é¢˜ç¬¦å·æ˜¯ `f`, å› ä¸º å­—ç¬¦ `b` å·²ç»ä¸ºå­—èŠ‚ç¼–ç ä¿ç•™äº†ã€‚ æ‰€ä»¥æˆ‘ä»¬é€‰æ‹©äº†å­—æ¯ `f` ï¼Œå› ä¸ºå¸ƒå°”å€¼é€šå¸¸è¢«ç”¨æ¥è¡¨ç¤ºâ€œå¸ƒå°”æ ‡å¿—â€ã€‚

### éšè—ç±»å‹

`array` å’Œ`tuple`è¢«çœç•¥ï¼Œå› ä¸ºå®ƒä»¬ä¸é€‚åˆç”¨ä½œAPI å‚æ•°ã€‚ `uint8-uint128`, `int8-int128`, `bytes1-bytes31` è¢«çœç•¥ï¼Œå› ä¸ºå®ƒä»¬è¢«ABI ç¼–ç å™¨å¡«å……åˆ°32å­—èŠ‚(æ„å‘³ç€ç”¨æˆ·åº”è¯¥æŠŠå®ƒä»¬ç®€å•çš„æ’åºåˆ°32å­—èŠ‚ç‰ˆæœ¬)ã€‚

### å¤§å°é™åˆ¶

å¤´éƒ¨æœ€å¤šå¯ä»¥ç¼–ç 31ä¸ªå‚æ•°ï¼ˆè¿˜æœ‰1ä¸ªå­—èŠ‚ç”¨äºå¯¹ç¼–ç ç‰ˆæœ¬è¿›è¡Œç¼–ç ï¼‰ã€‚ è¿™è¿œè¿œè¶…è¿‡å®é™…éœ€è¦çš„ç¨‹åº¦ï¼Œå› æ­¤ï¼Œ ä¸ºäº†é¿å…ä¸€ç§æ›´å¤æ‚çš„è§£å†³åŠæ³•ï¼Œæ˜¯å¯ä»¥å®¹å¿çš„ã€‚

### å¡«å……

ä½¿ç”¨[ä¸¥æ ¼çš„ç¼–ç æ¨¡å¼](https://docs.soliditylang.org/en/v0.6.12/abi-spec.html#strict-encoding-mode)ï¼Œä»¥ä¾¿ä½ ä»¥åå¯ä»¥è§£ç è¿™äº›å€¼ã€‚ è¿™æ„å‘³ç€æ¯ä¸ªå‚æ•°éƒ½å°†ç”¨é›¶å¡«å……ï¼Œä½¿å…¶å®Œæˆ32å­—èŠ‚ã€‚ è™½ç„¶è¿™ç§å¡«å……å¢åŠ äº†gasæˆæœ¬ï¼Œä½†ABI ç¼–ç /è§£ç å‡½æ•°æ˜¯å»‰ä»·çš„ï¼Œè¶³ä»¥å¾—åˆ°å¹³è¡¡ã€‚ æ­¤å¤–ï¼Œåè®®ä¸­ä½¿ç”¨çš„ [æ¨¡æ¿](../../concepts/template.md)æ¨¡å¼å…è®¸å¼•ç”¨è¿™äº›ç¼–ç å‚æ•°ï¼Œè€Œä¸éœ€è¦åœ¨è¯·æ±‚ä¸­æ˜ç¡®ä¼ é€’è¿™äº›å‚æ•°ï¼Œè¿™ä½¿å¾—åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¡«å……ä¸ä¼šå¼•èµ·çš„ç›¸åº”çš„æˆæœ¬å¢åŠ ã€‚

## `@api3/airnode-abi`

ä½¿ç”¨ [airnode-abi](../packages/airnode-abi.md) è½¯ä»¶åŒ…ç¼–ç å’Œè§£ç å‚æ•°ã€‚

```js
import { encode } from '@api3/airnode-abi';
import { decode } from '@api3/airnode-abi';

const parameters = [
  { type: 'string32', name: 'from', value: 'ETH' },
  { type: 'uint256', name: 'amount', value: '100000' },
];
const encodedData = encode(parameters);
const decoded = decode(encodedData);

console.log('ENCODED:', encodedData);
console.log('\nDECODED:', decoded);
```

å¦‚ä½•ç”¨ Airnode ABI åœ¨é“¾å¤–ç¼–ç å’Œè§£ç ï¼Œè¯·å‚é˜…è½¯ä»¶åŒ… doc [airnode-abi](../packages/airnode-abi.md)äº†è§£æ›´å¤šä¿¡æ¯ã€‚ åŒæ—¶ä¹Ÿå¯ä»¥æŸ¥çœ‹[ç¤ºä¾‹](https://github.com/api3dao/airnode/tree/v0.5/packages/airnode-examples)ä¸­çš„è½¯ä»¶åŒ…ã€‚

- [request-utils.ts](https://github.com/api3dao/airnode/blob/v0.5/packages/airnode-examples/integrations/coingecko/request-utils.ts#L8)
