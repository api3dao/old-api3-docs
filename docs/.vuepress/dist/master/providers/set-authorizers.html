<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setting Authorizers | API3 Document Portal</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.47099ff7.css" as="style"><link rel="preload" href="/assets/js/app.a5a9186b.js" as="script"><link rel="preload" href="/assets/js/2.07fbdb5e.js" as="script"><link rel="preload" href="/assets/js/35.e063a3d8.js" as="script"><link rel="prefetch" href="/assets/js/10.4abaee1e.js"><link rel="prefetch" href="/assets/js/11.553a00a7.js"><link rel="prefetch" href="/assets/js/12.5360a92c.js"><link rel="prefetch" href="/assets/js/13.e07ea0af.js"><link rel="prefetch" href="/assets/js/14.794ff9ca.js"><link rel="prefetch" href="/assets/js/15.6bb9a8e3.js"><link rel="prefetch" href="/assets/js/16.a4013902.js"><link rel="prefetch" href="/assets/js/17.a8677196.js"><link rel="prefetch" href="/assets/js/18.9483abe4.js"><link rel="prefetch" href="/assets/js/19.a7d94068.js"><link rel="prefetch" href="/assets/js/20.d68e25f3.js"><link rel="prefetch" href="/assets/js/21.6aec94fc.js"><link rel="prefetch" href="/assets/js/22.023bef78.js"><link rel="prefetch" href="/assets/js/23.9da2273b.js"><link rel="prefetch" href="/assets/js/24.3e30971b.js"><link rel="prefetch" href="/assets/js/25.8cff3da4.js"><link rel="prefetch" href="/assets/js/26.7d63536e.js"><link rel="prefetch" href="/assets/js/27.a8a4d841.js"><link rel="prefetch" href="/assets/js/28.b171db10.js"><link rel="prefetch" href="/assets/js/29.1ad11121.js"><link rel="prefetch" href="/assets/js/3.7dc44937.js"><link rel="prefetch" href="/assets/js/30.a244aca4.js"><link rel="prefetch" href="/assets/js/31.95f42b1d.js"><link rel="prefetch" href="/assets/js/32.416913a1.js"><link rel="prefetch" href="/assets/js/33.43fa3d9c.js"><link rel="prefetch" href="/assets/js/34.44de2351.js"><link rel="prefetch" href="/assets/js/36.61b00ed4.js"><link rel="prefetch" href="/assets/js/37.7192b9fc.js"><link rel="prefetch" href="/assets/js/38.0716475d.js"><link rel="prefetch" href="/assets/js/39.260dca54.js"><link rel="prefetch" href="/assets/js/4.77a548c8.js"><link rel="prefetch" href="/assets/js/5.5fd3c55b.js"><link rel="prefetch" href="/assets/js/6.706caab8.js"><link rel="prefetch" href="/assets/js/7.d81ee166.js"><link rel="prefetch" href="/assets/js/8.bc73cd5d.js"><link rel="prefetch" href="/assets/js/9.49430974.js">
    <link rel="stylesheet" href="/assets/css/0.styles.47099ff7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo2.png" alt="API3 Document Portal" class="logo"> <span class="site-name can-hide">API3 Document Portal</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Versions" class="dropdown-title"><span class="title">Versions</span> <span class="arrow down"></span></button> <button type="button" aria-label="Versions" class="mobile-dropdown-title"><span class="title">Versions</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/master/requesters/introduction.html" class="nav-link">
  master
</a></li><li class="dropdown-item"><!----> <a href="/0.1.1/requesters/introduction.html" class="nav-link">
  0.1.1
</a></li><li class="dropdown-item"><!----> <a href="/0.1.0/requesters/introduction.html" class="nav-link">
  0.1.0
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wkande/vuepress-docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Versions" class="dropdown-title"><span class="title">Versions</span> <span class="arrow down"></span></button> <button type="button" aria-label="Versions" class="mobile-dropdown-title"><span class="title">Versions</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/master/requesters/introduction.html" class="nav-link">
  master
</a></li><li class="dropdown-item"><!----> <a href="/0.1.1/requesters/introduction.html" class="nav-link">
  0.1.1
</a></li><li class="dropdown-item"><!----> <a href="/0.1.0/requesters/introduction.html" class="nav-link">
  0.1.0
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wkande/vuepress-docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/master/master.html" class="sidebar-link">Master Development</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Requesters</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Providers</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/master/providers/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/master/providers/api-integrations.html" class="sidebar-link">API Integration</a></li><li><a href="/master/providers/configure-airnode.html" class="sidebar-link">Configuring Airnode</a></li><li><a href="/master/providers/deploy-airnode.html" class="sidebar-link">Deploying Airnode</a></li><li><a href="/master/providers/set-authorizers.html" aria-current="page" class="active sidebar-link">Setting Authorizers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/master/providers/set-authorizers.html#authorizers" class="sidebar-link">authorizers</a></li><li class="sidebar-sub-header"><a href="/master/providers/set-authorizers.html#default-state-deny-all" class="sidebar-link">Default state: Deny all</a></li><li class="sidebar-sub-header"><a href="/master/providers/set-authorizers.html#allow-all" class="sidebar-link">Allow all</a></li><li class="sidebar-sub-header"><a href="/master/providers/set-authorizers.html#custom-authorization-policies" class="sidebar-link">Custom authorization policies</a></li><li class="sidebar-sub-header"><a href="/master/providers/set-authorizers.html#conclusion" class="sidebar-link">Conclusion</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Hackathon 2022</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="frontmatter-title"><a href="#frontmatter-title" class="header-anchor">#</a> Setting Authorizers</h1> <p>We are assuming that you have <a href="/provider-guides/configuring-airnode.html">configured your Airnode</a> (and set <code>endpointId</code>s of your endpoints), and <a href="/provider-guides/deploying-airnode.html">deployed your Airnode</a> and received your <code>providerId</code> in your receipt file.
Requesters who know your <code>providerId</code> and <code>endpointId</code>s should now be able to make requests to your endpoints.
However, you probably do not want to serve the entire public with your Airnode, but rather</p> <ul><li>Only serve your own client contracts</li> <li>Only serve requesters who have made a subscription payment</li> <li>Only serve requesters who have gone through KYC</li> <li>...</li></ul> <p>In this guide, we will explain how you can achieve this.</p> <h2 id="authorizers"><a href="#authorizers" class="header-anchor">#</a> <code>authorizers</code></h2> <p><a href="/request-response-protocol/general-structure.html#endpointstoresol"><code>EndpointStore.sol</code></a> keeps a list of <a href="/request-response-protocol/authorizer.html">authorizer</a> addresses for each <code>providerId</code>–<code>endpointId</code> pair.
An authorizer is a contract that Airnode calls to check if it should respond to a specific request.
It can enforce any kind of authorization policy that one could implement as a contract.</p> <h2 id="default-state-deny-all"><a href="#default-state-deny-all" class="header-anchor">#</a> Default state: Deny all</h2> <p>By default, the authorizers of all endpoints of a provider is an empty list.
An empty authorizers list means that endpoint is not allowed to be used by anyone.
Therefore, after deploying your Airnode, you must also set authorizers for your endpoints for them to be accessible.</p> <h2 id="allow-all"><a href="#allow-all" class="header-anchor">#</a> Allow all</h2> <p>The simplest authorization policy is opening the endpoint to the public, so let us see how to do that first.
Authorizers being set to <code>[0]</code> means that all requests made to it will be authorized (i.e., will be responded to by Airnode).
Only the <code>providerAdmin</code> of a provider can update the authorizers of its endpoints.
Therefore, you will need to make a transaction using the provider admin address (that you have set in <code>config.json</code> as <code>providerAdminForRecordCreation</code>) to <a href="/request-response-protocol/general-structure.html#endpointstoresol"><code>EndpointStore.sol</code></a>.
In JS (using ethers.js):</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>airnode<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>providerAdmin<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">updateEndpointAuthorizers</span><span class="token punctuation">(</span>providerId<span class="token punctuation">,</span> endpointId<span class="token punctuation">,</span> <span class="token punctuation">[</span>ethers<span class="token punctuation">.</span>constants<span class="token punctuation">.</span>AddressZero<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>You can also use <a href="https://github.com/api3dao/airnode/tree/master/packages/admin#update-authorizers" target="_blank" rel="noopener noreferrer"><code>@api3/airnode-admin</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to update endpoint authorizers.</p> <p>After making this transaction, your Airnode will respond to all requests.
Note that being able to do this on-chain through <code>providerAdmin</code> allows you to update your authorization policies without interacting with your Airnode or having to redeploy it.</p> <h2 id="custom-authorization-policies"><a href="#custom-authorization-policies" class="header-anchor">#</a> Custom authorization policies</h2> <p>We have mentioned that authorizer contracts can implement any arbitrary authorization logic.
See <a href="https://github.com/api3dao/airnode/blob/master/packages/protocol/contracts/authorizers/MinBalanceAuthorizer.sol" target="_blank" rel="noopener noreferrer">this example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> where Airnode only responds to requests if the wallet it will use to fulfill the request has a balance more than an amount set by the provider admin.</p> <p>The authorizer list allows you to combine single-purpose authorizer contracts to form complex policies as described in the <a href="/request-response-protocol/authorizer.html#authorizer-list">docs</a>.
If you would like to contribute to this set of authorizer contracts, please join the conversation in <a href="https://github.com/api3dao/airnode/issues/38" target="_blank" rel="noopener noreferrer">this issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusion</h2> <p>Your Airnode is completly set up now.
The following guides will be on how a requester would be able to make requests to it.</p> <p><a href="/#provider-guides">Home</a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/master/providers/deploy-airnode.html" class="prev">
        Deploying Airnode
      </a></span> <span class="next"><a href="/master/hackathon/introduction.html">
        Introduction
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a5a9186b.js" defer></script><script src="/assets/js/2.07fbdb5e.js" defer></script><script src="/assets/js/35.e063a3d8.js" defer></script>
  </body>
</html>
